import type { PlainVestingData } from '@nimiq/albatross-wasm';
import Config from 'config';
import { NETWORK_TEST, NETWORK_MAIN, NETWORK_DEV, ERROR_INVALID_NETWORK } from './Constants';

export class NetworkClient {
    private static _instance?: NetworkClient;

    public static get Instance() {
        return this._instance || (this._instance = new NetworkClient());
    }

    private _clientPromise?: Promise<Nimiq.Client>;

    // constructor() {}

    public async init() {
        const initPromise = this._clientPromise || (this._clientPromise = new Promise(async (resolve) => {
            const clientConfig = new Nimiq.ClientConfiguration();
            clientConfig.network(this.networkToAlbatross(Config.network));
            clientConfig.seedNodes(Config.seedNodes);
            clientConfig.logLevel('debug');
            resolve(Nimiq.Client.create(clientConfig.build()));
        }));

        await initPromise;
    }

    public async requestTransactionReceipts(address: string, limit?: number) {
        const client = await this.client;
        // Require only one history peer when not in mainnet
        const minPeers = Config.network === NETWORK_MAIN ? undefined : 1;
        return client.getTransactionReceiptsByAddress(address, limit, /* startAt */ undefined, minPeers);
    }

    public async getTransactionsByAddress(
        address: string | Nimiq.Address,
        // sinceBlockHeight?: number,
        knownTransactionDetails?: Nimiq.PlainTransactionDetails[],
        // startAt?: string,
        limit?: number,
        // minPeers?: number,
    ) {
        const client = await this.client;
        // Require only one history peer when not in mainnet
        const minPeers = Config.network === NETWORK_MAIN ? undefined : 1;
        return client.getTransactionsByAddress(
            address,
            undefined /* sinceBlockHeight */,
            knownTransactionDetails,
            undefined /* startAt */,
            limit,
            minPeers,
        );
    }

    public async getBalance(addresses: string[]) {
        const client = await this.client;
        const accounts = await client.getAccounts(addresses);
        return new Map(accounts.map((account, i) => [addresses[i], account.balance]));
    }

    public async getStake(addresses: string[]) {
        const client = await this.client;
        const accounts = await client.getStakers(addresses);
        return new Map(accounts.map((account, i) => [
            addresses[i],
            account
                ? account.balance + account.inactiveBalance
                : 0,
        ]));
    }

    public async getHeight() {
        const client = await this.client;
        return client.getHeadHeight();
    }

    public async getNetworkId() {
        const client = await this.client;
        return client.getNetworkId();
    }

    public async awaitConsensus() {
        await this.client;
    }

    public async isConsensusEstablished() {
        return (await this.client).isConsensusEstablished();
    }

    public getGenesisVestingContracts(): Array<Nimiq.PlainVestingContract & { address: string }> {
        const genesisContracts: Record<string, [number, string]> = Config.network === NETWORK_MAIN
            ? {
                "NQ15 61GG HE87 5FXB B6C4 YB8E REJX DGEX 8QC7": [138775500000, "200020d0290be350f9dd1263c9d915cbe23bfb3ba0e7a6edaf2c80b0f1fb1c0000001027d50a70000000204faa14e0"],
                "NQ78 CLRT NMCX ACKX 5D4K ATG6 N6EY VDRP 5H2R": [9891000000, "bc40dcd372a89c9283d3afb8afb3403c5c08b59ea0e7a6edaf2c80b0f1fb1c0000000126c65760000000024d8caec0"],
                "NQ43 3K80 RH3P 6VL4 C0MD FLVN ACUH UXQM G6XC": [1750000000000, "6fb0f9413145fbadf20146b6194898a62042ae5ea0e7a6edaf2c80e0e2f73900000043e8b024ab000001977420dc00"],
                "NQ77 TPD7 998L 191C NDV1 2SEV 6J5L 0VRR FSRV": [74626900000, "8dbb4c872de72679639392d5482e26efe6f4485ea0e7a6edaf2c80b0f1fb1c00000008b00e101000000011601c2020"],
                "NQ79 R0E8 YG62 233A RTFA NSKD EKA4 N8CC 5DNH": [82082800000, "52b787460800d22744dcab004cf6fa3e6ce1eea1a0e7a6edaf2c80b0f1fb1c000000098e4210c0000000131c842180"],
                "NQ88 S3QE JVPN BNUC 7A99 PQ29 ELA4 U1QT FJ1S": [11442044500000, "ee097e8e28cd348632655204480986ab2db95db2a0e7a6edaf2c80b0f1fb1c00000534077fbc1000000a680eff7820"],
                "NQ44 T3M8 5B0Y HHHK JL39 A4F4 VPGT 4R46 HVF4": [373134300000, "42eb86b8e60837407119c32d0c3cbff56c31590da0e7a6edaf2c80b0f1fb1c0000002b7044c9b000000056e0899360"],
                "NQ32 RFRM 1UPE 3L3E SU8A NLKV GU76 10FG ENHC": [17346900000, "5d0286d9c3cbc8cecb90f09feba76cd4bb93cb8aa0e7a6edaf2c80b0f1fb1c0000000204fa58100000000409f4b020"],
                "NQ34 90YD XLD6 1X7C V7HM HGA3 2L7K RKJX 2QMF": [74349400000, "0578229584b791b31bb070f47303a8332e12a584a0e7a6edaf2c80b0f1fb1c00000008a7c8e7e0000000114f91cfc0"],
                "NQ02 58NQ VN7B JD5V JV7G F0HV YDTC 0G19 9AU9": [74626900000, "3b111ac481d99d66c14c82499d41555364a8792ba0e7a6edaf2c80b0f1fb1c00000008b00e101000000011601c2020"],
                "NQ25 3VQB 09CL S3QQ B9FD 36DB LJ1X RNK7 0MQQ": [37918200000, "9d514b9f50e55ebb4754257a46a2a2e517a24b4fa0e7a6edaf2c80b0f1fb1c000000046a0ce86000000008d419d0c0"],
                "NQ22 5J6G RJDQ KXN8 D095 NV9X TL78 8G17 SN1C": [34693900000, "72a6324656c525a30566d538db0d5837a8b9162fa0e7a6edaf2c80b0f1fb1c0000000409f573700000000813eae6e0"],
                "NQ12 1BX5 1S9R LJ8D SLPU GB1D GBPC 732G TK70": [600000000000, "dec25d024207468384659c8e9353e72cefc2d18aa0e7a6edaf2c80b0f1fb1c00000045d964b8000000008bb2c97000"],
                "NQ29 HXS0 SB3N 35PP 0MNG 4NSY YUHC 1238 9AAA": [74626900000, "f56ef02848b5acf1f9435bc9224e897d1287d49ba0e7a6edaf2c80b0f1fb1c00000008b00e101000000011601c2020"],
                "NQ18 Q8Y5 F129 7VY4 MLJJ 37KG QTJ4 GXNB T1Q1": [783582100000, "385db37a526758a272367d61da486e1654b9d96ea0e7a6edaf2c80b0f1fb1c0000005b3890fd10000000b67121fa20"],
                "NQ36 HKAC B18Q 3AT1 3XA3 HH5D SY0V EQMU L35U": [150000000000, "704110f7d20a90dd98956ecda84e4d06c5052f52a0e7a6edaf2c80b0f1fb1c0000001176592e0000000022ecb25c00"],
                "NQ19 YG54 46TX EHGQ D2R2 V8XA JX84 UFG0 S0MC": [42000000000000, "07a0a5559ef7c4919641aac3fae26ede383cee84a0e7a6edaf2c80e0e2f739000001e8f1c1080000002632e314a000"],
                "NQ20 FH67 Q1H7 NMQH H6KE 3EG5 0HCB C0MJ 7S1H": [373134300000, "d0cc527617d8ff3f08ae73f81156ad2e3d192b46a0e7a6edaf2c80b0f1fb1c0000002b7044c9b000000056e0899360"],
                "NQ21 FNCA 4TP7 CUKF JD25 QRBV EC15 096Q RDVN": [929368000000, "e825b2ce65d619840c128ff93977f15fedc3acaba0e7a6edaf2c80b0f1fb1c0000006c31532300000000d862a64600"],
                "NQ48 1TLR 87GJ S4FC UUR6 3DLP XD52 G39C MTXL": [37174700000, "31d7bf18aca15fd8e6fa7479af53e431dfa61f1ea0e7a6edaf2c80b0f1fb1c0000000453e473f000000008a7c8e7e0"],
                "NQ66 TKPJ PVPF N446 NQYQ GMB8 EEF8 TTXU LBM4": [1750000000000, "979cf70f87ec2c8070d5cb12e05f2b6a466b713ca0e7a6edaf2c80e0e2f73900000043e8b024ab000001977420dc00"],
                "NQ63 7KC4 3GY8 5JTC K19X 4U8T JD1Y H86H SVRG": [373134300000, "f9416d7eff1cb4b3f2e4d85e6c829ff211e65b20a0e7a6edaf2c80b0f1fb1c0000002b7044c9b000000056e0899360"],
                "NQ84 GHU1 CC4U RGR0 PKBX R8DS 942S E39T FU9R": [15144300000, "1356cd0e7ab342e4655fc2f5c0bae98caa7a5059a0e7a6edaf2c80b0f1fb1c00000001c355d6f00000000386abade0"],
                "NQ69 B3N2 CAM4 C4AF AS6C SD08 P1P6 SJ69 DHSA": [1517200000000, "1b46ba2eec6f025328cb873b7bce417be9863d24a0e7a6edaf2c80b0f1fb1c000000b0a015620000000161402ac400"],
                "NQ76 J96K BRQE LH8G 99P1 QD35 4NCA DTK9 JP3K": [150000000000, "2cfe57a93f73e4e553dc279fd0f27a2a100d8344a0e7a6edaf2c80b0f1fb1c0000001176592e0000000022ecb25c00"],
                "NQ79 0T8U LJJY EYNB TPNT X5PM 13V8 4BHC CVG6": [929368000000, "b5eb86935b0e0cbac951224a75475ad4a11eb037a0e7a6edaf2c80b0f1fb1c0000006c31532300000000d862a64600"],
                "NQ57 JU13 A6S1 Q5EL 0Q6C VPDF GVYX 420E YAVA": [150000000000, "9d40323be257b11eb307c937cbddaaee6ae781d2a0e7a6edaf2c80b0f1fb1c0000001176592e0000000022ecb25c00"],
                "NQ50 MK6H J618 0CN2 57AA XGUK DA0L L3DA 79XV": [74350000000, "d47bb196dab26a9c801d0330e6810f1c763e732ea0e7a6edaf2c80b0f1fb1c00000008a7cd7bc0000000114f9af780"],
                "NQ15 RE6V B7HD 0FEX P6JP 62HJ Q4LH B42K JU6R": [184686300000, "d9245eb58672b3a46ad0317b8b9957b67aadee60a0e7a6edaf2c80b0f1fb1c000000158014a5b00000002b00294b60"],
                "NQ29 67LM 765P U4AN BHGU XQ4V HEA0 NF0Q SYKP": [75000000000, "4756335ede8094b859defdd937c721eeee7813e9a0e7a6edaf2c80b0f1fb1c00000008bb2c97000000001176592e00"],
                "NQ26 R2UR QF6L LCXY 6S6R DQK6 DN99 EVMU P2PY": [1312500000000, "fcb25eb488484eeb7fd04db94dffe264bd505430a0e7a6edaf2c80b0f1fb1c00000098cb8c5280000001319718a500"],
                "NQ75 5JM8 1FS2 DFE1 KP4U 03CS 8FHD LQSG YHRV": [93283600000, "62a153a5eeabe57af690496251d9c2304168db50a0e7a6edaf2c80b0f1fb1c0000000adc11634000000015b822c680"],
                "NQ24 5VMT VYY7 61NF 39FA YGDS BG1R UPAL EJVX": [186567200000, "07d7ce4b19b795254f5109c210ff892f95748a37a0e7a6edaf2c80b0f1fb1c00000015b822c6800000002b70458d00"],
                "NQ49 GMFV JSQK RJC4 8F5T NMTY Q53N 5M64 JBGS": [5144900000, "07397174290a1a587fe955e0e4f59af37e5aab87a0e7a6edaf2c80b0f1fb1c00000000995478d00000000132a8f1a0"],
                "NQ17 XSPV 7THX 291T 60DT LHAE 2KNP X3U6 JVCN": [1750000000000, "4dcf0b0c70486431227b32eeb42a2f6ca30c5b9aa0e7a6edaf2c80e0e2f73900000043e8b024ab000001977420dc00"],
                "NQ02 J8Q9 05RX T9TF 6US4 FFRQ YM1T P0JL 7D0G": [600000000000, "08a618d31b7fd6c4079e24db5898071b9670419da0e7a6edaf2c80b0f1fb1c00000045d964b8000000008bb2c97000"],
                "NQ75 4MCS BMCY PV2X QJ13 68CC K7MQ HSGE CGH4": [373134300000, "a0049600fecbc7b3312ca0050d6605a67fd8d507a0e7a6edaf2c80b0f1fb1c0000002b7044c9b000000056e0899360"],
                "NQ35 0LQU U1R2 ANXK TS72 AB72 BN1H 5LQ2 2RT3": [600000000000, "c55113641286f254766b44e6808b8787ba4a1fcea0e7a6edaf2c80b0f1fb1c00000045d964b8000000008bb2c97000"],
                "NQ07 HPBR 6GDC 4JSM 88V0 2XKC E4N8 52Y7 KVMH": [500000000000, "6099016973f25367585e3f94658bd64f01a7fb0ea0e7a6edaf2c80b0f1fb1c0000003a35294400000000746a528800"],
                "NQ34 JHV8 GYCJ 0TUQ 2AA6 26AK M79B JGCE BQU9": [185873600000, "58ef72017a95654210f7cbffe791b3943032ce5da0e7a6edaf2c80b0f1fb1c00000015a37707000000002b46ee0e00"],
                "NQ29 K6Y7 HTUN NFQV RBP8 HNE7 6YLN DUPJ KPKH": [1750000000000, "b5326ac47f375fb9dcb924228c49b7938bb37770a0e7a6edaf2c80e0e2f73900000043e8b024ab000001977420dc00"],
                "NQ04 J62A 62F1 5M79 P225 9RP6 8AVV SKPF UFT8": [15000000000, "db9c6ae5094593a7f48e6b669f70603a420db5c8a0e7a6edaf2c80b0f1fb1c00000001bf08eb00000000037e11d600"],
                "NQ87 YGT8 FX8T HEVH RGJB APEN 83HU KER3 4QD9": [41041400000, "63ddd9ab4e5d3fb7b41ff2a06647beca2fa1f52aa0e7a6edaf2c80b0f1fb1c00000004c7210860000000098e4210c0"],
                "NQ52 6JCH RHXM XT9M J8Y1 07GR H3LA CDGV 2DS9": [50000000000, "ec567774bc40ae5b832b378d8791f4d5660d33a0a0e7a6edaf2c80b0f1fb1c00000005d21dba000000000ba43b7400"],
                "NQ66 N4EK 0V5U UHSP 5NQE 3U3C M126 ANQT DJ8C": [150000000000, "d1336297b4f76d04c2921ea91dfef23290dea79aa0e7a6edaf2c80b0f1fb1c0000001176592e0000000022ecb25c00"],
                "NQ77 H1V8 L29V 1D5V GQMP 87N2 DELB XMBJ C60N": [150000000000, "ddf7adb0d0a547af45fd75f5baaa015d20a1bf59a0e7a6edaf2c80b0f1fb1c0000001176592e0000000022ecb25c00"],
                "NQ98 A35A 7X9N ANSL J2V3 D3GR VBUC ML59 RL68": [74626900000, "ae26b0807ec8dd46eecc06575d8ff974f3435405a0e7a6edaf2c80b0f1fb1c00000008b00e101000000011601c2020"],
                "NQ49 B4RB HHQR 4G98 JXYF VFS0 C5U9 9FLV GKL1": [7000000000000, "df44962e6c54d567c6bf3c06bb55271b29ff6733a0e7a6edaf2c80e0e2f7390000010fa2c092ab0000065dd0837000"],
                "NQ09 VF5Y 1PKV MRM4 5LE1 55KV P6R2 GXYJ XYQF": [52500000000000, "fd34ab7265a0e48c454ccbf4c9c61dfdf68f9a22a0e7a6edaf2c80e0e2f739000002632e314a0000002fbf9bd9c800"],
                "NQ72 3EER HU8C KFNY R85J 4VF1 GYYY RLPF 0EQ2": [25000000000, "6a90aad1aec0259401e0ef24ef08d9890f4c74cfa0e7a6edaf2c80b0f1fb1c00000002e90edd0000000005d21dba00"],
                "NQ57 P6TS C284 5NPT HRQY 1ALP GMJ4 2Q0Y 1DQN": [104081600000, "8f37993974111be44c00ae51bcf51679673f4819a0e7a6edaf2c80b0f1fb1c0000000c1ddf9700000000183bbf2e00"],
                "NQ27 XPU4 U8F5 JLXL BVM2 1DFV FDJV A3H3 YJG0": [1312500000000, "11339ad3d1fbb5f1b7637fb1a8a725845e7fa7bda0e7a6edaf2c80b0f1fb1c00000098cb8c5280000001319718a500"],
                "NQ22 FHS5 18L6 P1FD VENK V28A RJGD 8LXX 20BS": [350000000000, "fda768991255ad66cfe4e5d0d40a81405e1c38b5a0e7a6edaf2c80b0f1fb1c00000028bed01600000000517da02c00"],
                "NQ86 TGJA QM9Q P1BT ME7J NC33 BD5K DMUR V2EP": [373134300000, "9b3e6fd99faa212eb6f4aae756d1d4ce1997bab7a0e7a6edaf2c80b0f1fb1c0000002b7044c9b000000056e0899360"],
                "NQ76 P7SN DA9T K3UE 40EM HJAL 6UK8 R4CF GGUL": [111524200000, "caf2525d62116d1ffd9f26166fb273893b11d61fa0e7a6edaf2c80b0f1fb1c0000000cfbae1f2000000019f75c3e40"],
                "NQ53 TJLJ DSL6 VXK9 J7V7 VB44 CSU4 HD7M 30M5": [34693900000, "afcc373acd784edf78aa520663f7113d40e8d7e6a0e7a6edaf2c80b0f1fb1c0000000409f573700000000813eae6e0"],
                "NQ97 0E5T 0XNC XNAX FV31 DAT2 81FE PA8A HAYF": [74626900000, "26149b477ffc32f5f17f15985b9df73976fc6145a0e7a6edaf2c80b0f1fb1c00000008b00e101000000011601c2020"],
                "NQ15 T9UV 5A0L 0KH4 XMN5 HJNJ SPGG YVY4 0F9V": [1312500000000, "dd468814ba5e31e191ca6c4621053c75f6ce7a7da0e7a6edaf2c80b0f1fb1c00000098cb8c5280000001319718a500"],
                "NQ50 PD84 KGB2 1TN2 AA2X J6NH 4UTH 7SU9 5PPR": [4104100000, "8a417d7cceb41b0084356247d2bc0cc3f7fb3464a0e7a6edaf2c80b0f1fb1c000000007a4fcc5000000000f49f98a0"],
                "NQ31 31YN LNVA 8YPG K2E7 C7M9 B0CS VN3N L0EC": [150000000000, "2957847390b1f556f3763c15416e8c6eccd7f806a0e7a6edaf2c80b0f1fb1c0000001176592e0000000022ecb25c00"],
                "NQ06 6TKS LN2N EDRX A5P4 J2D0 2F7K BBFH FPU3": [15000000000, "9103403910061e89416a2b09967b8085513d6a99a0e7a6edaf2c80b0f1fb1c00000001bf08eb00000000037e11d600"],
                "NQ58 BB2V 5L0Y HAU9 3BL2 G4K2 NG38 CF11 PLXX": [55500000000, "b80a400d569c1e9a164af334e53ddee55f787170a0e7a6edaf2c80b0f1fb1c00000006760765800000000cec0ecb00"],
                "NQ29 PLEB F5HM EY2H 0UMH LCB9 7MKL UA1A 7M1K": [150000000000, "d66843fb6ca5d7f9e469046f2bf90d691a1a7ad4a0e7a6edaf2c80b0f1fb1c0000001176592e0000000022ecb25c00"],
                "NQ51 C6FX VEQ3 3GH9 52A3 RYPL K8NL 7L92 QTRC": [1750000000000, "7dc5ae35322d2020e9ef8967781b967a99a95bb8a0e7a6edaf2c80e0e2f73900000043e8b024ab000001977420dc00"],
                "NQ69 X6A8 YR9T NSNU X4RT C3QX TA39 3CF5 R0RD": [1750000000000, "e336165bc6a094ba3a02d9f330f3a1815a499a14a0e7a6edaf2c80e0e2f73900000043e8b024ab000001977420dc00"],
                "NQ16 C59C 10D3 QGKQ 9EFQ VH8Y 64GA JL9C L4P2": [93283600000, "f0d90cfb9ac370b445cc4b3b10632d6e2cbd89d9a0e7a6edaf2c80b0f1fb1c0000000adc11634000000015b822c680"],
                "NQ23 MCXU AUAT YCQ0 94XA R4F9 KXFR N8UU D04X": [74626900000, "ec74064fd52b987aa391c8f112d5b5fbfd13e5a3a0e7a6edaf2c80b0f1fb1c00000008b00e101000000011601c2020"],
                "NQ95 JMN1 192Y JEKF 2M8V 5M1K DJKT FBPH E4XT": [350000000000, "466e5f891b5693eee6b7514cd0d4b41b1c9c8161a0e7a6edaf2c80b0f1fb1c00000028bed01600000000517da02c00"],
                "NQ30 2XFR TV98 2U7Q Q68S KQD8 L2A8 FX0F R5RA": [92936800000, "0e4efeceb2111428012ba546ee801c88cd874628a0e7a6edaf2c80b0f1fb1c0000000ad1bb838000000015a3770700"],
                "NQ80 S4P0 X96E 1ELG 5BXP 5P82 T627 K3D8 GXGL": [333300000, "268ee9cb7a2a1b4fb10a393163ebf1bb253dca94a0e7a6edaf2c80b0f1fb1c0000000009eee0900000000013ddc120"],
                "NQ10 CF12 5NBP EE1V GJHX 0PMJ DLF5 N41A LCXH": [5200000000, "70bb852483af3e2fc565b57a212e9578ec994a0aa0e7a6edaf2c80b0f1fb1c000000009af8da000000000135f1b400"],
                "NQ45 D04K XMR5 0U66 MU75 G5X6 3J80 YT0B FMQ2": [600000000000, "a68fc5172d94b2bc17b7346699c526b8f7898d7aa0e7a6edaf2c80b0f1fb1c00000045d964b8000000008bb2c97000"],
                "NQ06 YLH7 0BFY 6B6T NJ0H ET63 DQDR VJNF CX3E": [746268700000, "0fe2000f5edbbd459c78604ec9b923b56fc7993ba0e7a6edaf2c80b0f1fb1c00000056e08a56b0000000adc114ad60"],
                "NQ78 588B 3906 VEGY V5VP 1QHB US75 9F7B 7TUF": [29652400000, "36a76acb41687aa1ba4736368b755f7e997cf64da0e7a6edaf2c80b0f1fb1c0000000373b5dbc000000006e76bb780"],
                "NQ10 A7KN FTK6 A1Y2 6YGQ 9JYE 38B2 UY8Q GHA8": [185873600000, "f962d255fb6c8ba06b1192f7f73109f5df843deda0e7a6edaf2c80b0f1fb1c00000015a37707000000002b46ee0e00"],
                "NQ40 X2AJ 35R7 MTA5 85F3 D8MM Q6FT A0LX H7KP": [1750000000000, "1144fb0f59a1ef7da03ad76408fc7d57eab0e7e0a0e7a6edaf2c80e0e2f73900000043e8b024ab000001977420dc00"],
                "NQ74 VLR4 PKHN NX66 DFCS V870 07DX 9KQX P385": [40148700000, "47488d3ec1c521b448495d27117cb60bffd0fdd2a0e7a6edaf2c80b0f1fb1c00000004ac8645b000000009590c8b60"],
                "NQ98 7F52 ET23 FGE1 F90B VG6J QLDV P97M 0E5C": [260223000000, "72a2a2f97cd7864f6cf471dace59981747cb13b1a0e7a6edaf2c80b0f1fb1c0000001e4b3feee00000003c967fddc0"],
                "NQ29 7YF3 7R9S PR0T BGX6 7HNB CGEX CEFE 7B28": [111940300000, "080eaa9aa1fa175cee84a62b135b81c52113f2f7a0e7a6edaf2c80b0f1fb1c0000000d0814b6700000001a10296ce0"],
                "NQ33 45F2 EFR9 XTQE L3Q4 HMGE QQ16 2JNK 9MGJ": [150000000000, "285fa395b7bd1b1303f3e5e75d0142b3ca5f3935a0e7a6edaf2c80b0f1fb1c0000001176592e0000000022ecb25c00"],
                "NQ88 2TUS PDRB LQA1 NEQM SMHK 257S 94RQ 563V": [1312500000000, "c7f50beb51066e5def28e1f49d98feb72ae0a631a0e7a6edaf2c80b0f1fb1c00000098cb8c5280000001319718a500"],
                "NQ65 Q29R 24JM EE3L UDUY 3U59 55XA EJP7 YDF2": [186567200000, "0958e3590a269916569e7de9c631fcad6c6bd73ba0e7a6edaf2c80b0f1fb1c00000015b822c6800000002b70458d00"],
                "NQ64 V11A JJ93 U3RF 42NT 11YM 4KU1 MSQG AMUT": [1750000000000, "97489276ba44fea671be53943e6d0712fca587dea0e7a6edaf2c80e0e2f73900000043e8b024ab000001977420dc00"],
                "NQ09 B3N9 4A65 2KPS R845 8EV0 JSDH 8PQS N0UN": [74349400000, "ebd4ec914becf85c41585d50a81dcc0f4bae4d3da0e7a6edaf2c80b0f1fb1c00000008a7c8e7e0000000114f91cfc0"],
            }
            : {
                "NQ37 JJN3 P9QA EP99 JFPP HVHH CNL9 QG4R 7L7D": [3727772232439, "b5d050775729289baf93eb7519fa5e5174ca9508f0e8b6b1cb2c80e0e5a40100000363f08a2af700000363f08a2af7"],
                "NQ20 BTG7 YVD5 MJFB 5M2F 111N L91G 4FV9 V633": [4287616917096, "d9fe7a95fece5d2557ffea4f3cc87513f57b1773f0e8b6b1cb2c80e0e5a401000003e649e21e68000003e649e21e68"],
                "NQ33 LEY3 R86R 82JC LMKK DCH6 AYUE S8MD 95B7": [2600867916348, "589a896e740c1d336b0888a542d7c7fb4fe5f11ef0e8b6b1cb2c80f0b25200000064ed4d270a0000025d8fceea3c"],
                "NQ58 A18A A4HG LY6B UQCK 7U4Q 7MN0 29QK HP3R": [1052616445724, "9abec8825ff904e19608ffb95db30e4f11d3f7a3f0e8b6b1cb2c80e0e5a401000000f514d44f1c000000f514d44f1c"],
                "NQ60 J9KN 9M13 RCH2 6921 55ES KDDF ANBE AC83": [1493894334825, "21556425e540e081228f2a42508a4b7896d60ec3f0e8b6b1cb2c80f0b25200000039f881c1920000015bd30a8969"],
                "NQ10 MMBC T98E VHP0 S2HF 50QA 2GN2 MNTM VG0T": [2409805980624, "9f358887df0c1c32985a110490ed7e8692eb55eff0e8b6b1cb2c80e0e5a4010000023113a123d00000023113a123d0"],
                "NQ46 J8R7 E70V KMVR PS76 0XKM J4U1 A0TY BS81": [2541501628349, "28c4049b6244aaeaaa1ecf6cc6f10f0923e53b54f0e8b6b1cb2c80e0e5a4010000024fbd4d3fbd0000024fbd4d3fbd"],
                "NQ19 VFL3 GSSU UUPL HHB5 61UF 3H4H L9HY R4DP": [4123178425540, "e03d50ee5db2e8bc548eb5cb3a204e848a89fc5af0e8b6b1cb2c80e0e5a401000003c00095dcc4000003c00095dcc4"],
                "NQ31 B1YJ NBDJ TCM8 8RNY DMPV 2LAS UQMA SPXC": [1561750130612, "d59c8cee3ca46e0d39413acc59a3bcb7dcaf828ff0e8b6b1cb2c80f0b2520000003c9a97f7f40000016b9f8fcfb4"],
                "NQ82 725N J86E G1X2 8PGC DL2A D0LA PNBG SUM3": [2701922179786, "1b7fedd3579b9595805a4880cecfd541403887d1f0e8b6b1cb2c80f0b25200000068d92f6f2200000275171c9aca"],
                "NQ07 9RCR YH69 MRBS KQJN L052 Y9BG NG8M KBVH": [2084602182210, "669f5db01fc4d4ec10984e0614775b02144bee9ff0e8b6b1cb2c80f0b25200000050e4a97f0b000001e55bf8fa42"],
                "NQ80 0777 PCAJ Q5M2 AL5B QD7V 2KFG 3F18 9776": [580507883246, "01c3a64cf4841d1d112d7f77f2798818ddd0cc10f0e8b6b1cb2c80e0e5a4010000008728f756ee0000008728f756ee"],
                "NQ66 8NRM UM4N FJY6 7M6J MCFM 0U68 RDKG EKUR": [3635953218138, "9e82fb79b9020704f08631c1ea31093e756c6466f0e8b6b1cb2c80f0b2520000008d17f3330f0000034e8fb3325a"],
                "NQ75 LAV4 CKTC G7G8 4B2P R285 69UM HBQQ GY26": [716011267605, "0c4b9473e7917ffd31b3f3baf6ab5e163adf409ef0e8b6b1cb2c80e0e5a401000000a6b598e615000000a6b598e615"],
                "NQ36 F0RP 2LS7 DB6E AP72 PMQH 5S4L J0MF B6LX": [2109942846560, "0545b7130501f09598e23f08f5b0d6e17af627b6f0e8b6b1cb2c80f0b25200000051e0662366000001eb4264d460"],
                "NQ74 GX0V E8LE 9XCD H5RM J5B8 EY37 TSVY XURL": [812759836780, "45fac3473a9978f44b5d4e439ced7ee20eb350f3f0e8b6b1cb2c80f0b2520000001f8a0b26bd000000bd3c42e86c"],
                "NQ14 S0L3 6UQT B9G0 HDY8 T7E8 J24G F6MV QSNJ": [771997636399, "c0462446736925009739616eb41899f6571ad957f0e8b6b1cb2c80f0b2520000001df51b83de000000b3bea5172f"],
                "NQ33 S6XL A56X G6JK 1975 9QLF A1S4 L9DE 891X": [1629650178664, "91ba3432de13ffaccfb2b96463998af34e9ed39ef0e8b6b1cb2c80e0e5a4010000017b6eb852680000017b6eb85268"],
                "NQ04 DYF1 2264 CCNM TQ8U 0JE4 BKV9 YEYX 874L": [1878710623401, "3294e45746bf250971286a33693c063464f52032f0e8b6b1cb2c80e0e5a401000001b56be11ca9000001b56be11ca9"],
                "NQ11 8B41 0NBD 65L4 N2DR GDC2 LLBG X3D4 CERN": [15223778947, "339d50b087fd68473ff75a7028665258b901b767f0e8b6b1cb2c80e0e5a401000000038b686e83000000038b686e83"],
                "NQ18 ASYY NX5L DVY0 JB2Y HXRQ V6JM 89UJ DD6Y": [1493465786751, "534dd811cc4fadc948d76d950ef1e3b46c87791bf0e8b6b1cb2c80f0b25200000039f43fe6eb0000015bb97f697f"],
                "NQ24 06LQ YUEG C5QB 2AKP V883 3EUT 8LKE 7J68": [644020608794, "73d588484a6f47030e19b15cd17ea37ead2868e4f0e8b6b1cb2c80f0b25200000018fdc51a8500000095f29e9f1a"],
                "NQ71 2F1U FRJ5 U3S9 XC5S DYA0 PDUL RB9K YQRQ": [3122109673098, "0907dc5f74db022d3c25bb0e769c3412c1ab4200f0e8b6b1cb2c80e0e5a401000002d6ec3cee8a000002d6ec3cee8a"],
                "NQ67 7LDD VB0F HQJ9 F0EG MMMC 7028 43GH 8NND": [1385408071911, "e3f26a269a13a9c5689f6bb53c5b1fe9bafcc45af0e8b6b1cb2c80e0e5a4010000014290c188e70000014290c188e7"],
                "NQ07 V7N5 TLXY ADRR CFG8 J82J B1CR MDQ3 JAKL": [1330070127604, "9d1d89d0d5a0b042c8629ac41cbc1903bcc4d676f0e8b6b1cb2c80f0b252000000339d0f40a900000135ae5b83f4"],
                "NQ72 2LT0 KECM XK45 Q9US 070U B5JT 5J0U C1M6": [4191119546739, "3667d7971e116fbacf82f6e51743c952099ae6eaf0e8b6b1cb2c80f0b252000000a2a3082ee9000003cfd2311973"],
                "NQ85 MUEF VJD6 HSKJ XMXP 5BRE KYXE 2K75 X06L": [988216818621, "98d156bf52ef5d5351ea71466015bf19fd2b5e37f0e8b6b1cb2c80f0b25200000026590d54a0000000e6164ffbbd"],
                "NQ89 VH75 LEX6 APNY 3EGF L3UE D5KN 4GMS P9HN": [3362182800583, "9d3cf914bfd480fdd56bf7e94084d260c0f60dd9f0e8b6b1cb2c80e0e5a4010000030ed1b624c70000030ed1b624c7"],
                "NQ80 RLXP PPSX 7KXD 88HF GE4A 5D00 GNN6 BAXD": [296719220424, "7c5981ba83e3987c32ec36fec157eef0af9f5e79f0e8b6b1cb2c80e0e5a4010000004515d7fec80000004515d7fec8"],
                "NQ06 3A2G C9UA BUFC B6N4 0K4V 3YAM RKS7 HDPH": [3808024313879, "412447441a9aba967eadb963c3f25591c0a6b531f0e8b6b1cb2c80f0b25200000093c552a004000003769fefc017"],
                "NQ11 XMT1 SBXH YGT9 RVXG D274 HPG1 HGQR QNQJ": [2628271742638, "547f5b8de16c5446537ed64642aac22417242a68f0e8b6b1cb2c80e0e5a40100000263f1341eae00000263f1341eae"],
                "NQ66 1HJA U9D4 AGXX M96Y X647 6DVS 85H0 JRQF": [4373082214930, "d430319fec839164377ed1ea7d26889ec563e920f0e8b6b1cb2c80f0b252000000a9b2ab2dae000003fa30031212"],
                "NQ07 DYQ7 5XUA G3VV 3VTM 0BM0 GEVQ NH30 XG57": [1888793741823, "4ed87748fe96b49f5ee1c1ff3f3a5db34a2da69df0e8b6b1cb2c80f0b252000000494b7ae1ab000001b7c4e149ff"],
                "NQ76 E5NX K4S8 9RS9 65FC DQ8C H5ML SCYG 81XJ": [2515379268724, "739a86524b04334367254efd03e4e59bc07bf072f0e8b6b1cb2c80f0b252000000619c0c476900000249a849ac74"],
                "NQ69 2PUL G767 DR7S PNM6 YU8D NTNK 01UG ENS2": [1293150355825, "2c41d119e465797e50260add8169f0056f64f814f0e8b6b1cb2c80e0e5a4010000012d15c481710000012d15c48171"],
                "NQ16 G50U FSAJ LPNH V5X6 5XP5 0BTT QGAY GSKM": [4090510186021, "3af84cd39abdfca33d73dc8ba5c96a3fc15469a8f0e8b6b1cb2c80f0b2520000009ebb915907000003b865681625"],
                "NQ88 0YC8 HRG4 CBM5 2TFB 3057 VXH6 LFBT KSB2": [313449243229, "e0e2afdfa1c8aae2b79f9b5508f7680bf678645cf0e8b6b1cb2c80e0e5a40100000048fb07e25d00000048fb07e25d"],
                "NQ09 BGTQ 5SMQ CR92 SGPG DMTV SN64 YUUE NYCL": [594472279574, "ca2cbdf95ba266d9a4d7bc6ad26723ee8ce4fb34f0e8b6b1cb2c80e0e5a4010000008a694f1e160000008a694f1e16"],
                "NQ08 A07E MSEY A6S2 V3AE RP13 X1BS 2LMB 8J5D": [3898393884198, "9a3bf3e4291514b236c7368d1a79bd9637c4a596f0e8b6b1cb2c80e0e5a4010000038baa61f6260000038baa61f626"],
                "NQ32 V9U1 YJM7 NRQS 07BB 3FUA 62TR SE5T 9D1V": [3105716891892, "b8526257821c8ade3146cee18ef845d4ec211a5ef0e8b6b1cb2c80f0b2520000007884867d7e000002d31b26f0f4"],
                "NQ48 M5CK 5XAV JHBQ JU48 0VPM VH69 YXGD CG22": [4399860844880, "255a8f5a69e301c976913b5e87b2ec3ed3547770f0e8b6b1cb2c80f0b252000000aabcb0c18e000004006c248950"],
                "NQ07 8A5N GT7Q T47X 65BT KP2R PGG3 XQQG N8KV": [635356125892, "c72aabfed0364fcf42d49d4433a05773234d8bb8f0e8b6b1cb2c80e0e5a40100000093ee2d1ac400000093ee2d1ac4"],
                "NQ04 60AF J3PA T2KC GTLK B5F6 TJRG QDPF KS83": [4229683560486, "6d6f639854c2cec3bd997e7ba93a786840a2b4a3f0e8b6b1cb2c80e0e5a401000003d8ccc94026000003d8ccc94026"],
                "NQ46 HNHJ F72L 1CYY VHY8 AT9C GNAF UYED D07D": [928670773260, "2cd90b492eb21b623963d31c076ea4811c5fe24ef0e8b6b1cb2c80f0b252000000240983e802000000d83917700c"],
                "NQ18 VG8H TL8H FC10 0J3R VST5 MHRC P35P 6P3F": [1664632822124, "25ab61f886646b2b55d02277e658d546c21a4a89f0e8b6b1cb2c80f0b2520000004098a42ee80000018393d9196c"],
                "NQ07 N4HK DGPX DJY5 S7L6 4TPU MBNN 8KPP CN32": [2552067537953, "c8b507458a67a1dcbd953aacaca74dec5d74e922f0e8b6b1cb2c80e0e5a4010000025233143c210000025233143c21"],
                "NQ33 HFCH AQRR BQ1F RKM5 4U5U B0YS 4DRV K0LR": [2832810445537, "37be58533b587e812e29f0d952bddac13e7fe200f0e8b6b1cb2c80e0e5a4010000029390a90ae10000029390a90ae1"],
                "NQ79 UBN6 041N 7SVU SPLM 08P7 08FU SXL0 SK0T": [2717891971310, "8f901b5a3b82f23083de193249d0f7bc2b2a048ff0e8b6b1cb2c80f0b2520000006977d4b6d300000278cefc48ee"],
                "NQ94 8HUH CPRR D8Q9 L4X4 Q92D Y0UL L1BD MEU2": [228538014846, "300ad53bcb1a2b1cac54fd0c9c92a101ff435288f0e8b6b1cb2c80e0e5a4010000003535ed5c7e0000003535ed5c7e"],
                "NQ59 U7HM X278 CTRM RT2U P4A0 KG49 YJR2 CYQK": [533933363077, "e885535e8a6e3b3f5007ebd976abda32e1100060f0e8b6b1cb2c80f0b25200000014b826c2970000007c50e88f85"],
                "NQ06 JFKN UPXU XQKF 6YY3 UVSC FEF1 40ER YPT9": [1829485916992, "34ccf4577cebaa6981f1ae2cc18f7ec4205395e8f0e8b6b1cb2c80f0b25200000046fe4f488b000001a9f5dbb340"],
                "NQ36 FXD7 V4DA N51S 2DBH C4X1 4VR4 Y09A 8JPS": [1664291368090, "e5073cdd38a619176ea82417fd8acbb92cd06e93f0e8b6b1cb2c80e0e5a401000001837f7eec9a000001837f7eec9a"],
                "NQ76 8GRA VS8D Y43K SNQC YNYQ G89F 4DJX XNVU": [2692094713815, "cb03ec8bc046646f822b2d67c36fb139b349343af0e8b6b1cb2c80f0b25200000068778ee54f00000272cd595fd7"],
                "NQ11 17XU 61XP 75NT ALB2 H1K9 TGJV 073Y MDUT": [1253117466374, "f3c3bfcb4cbe9e378dca803258bf13c8fa8d6a07f0e8b6b1cb2c80e0e5a40100000123c39f170600000123c39f1706"],
                "NQ94 CAXN THTR P7MB KNQ9 17DY H7QY YHRJ H0L9": [1429019297375, "04192e7d4d74be26a76c361a9c2f0065ee9ce62df0e8b6b1cb2c80e0e5a4010000014cb830065f0000014cb830065f"],
                "NQ29 X483 R2K4 EFRP KR0B Y14T EQEX CLN0 2E35": [3558067895307, "ef64d8521ec56103122131c9047452688d467ac8f0e8b6b1cb2c80f0b2520000008a123a94ad0000033c6d5f7c0b"],
                "NQ49 AUV0 QB7F 6KLP PDCV HVJG LU83 QTJE KXQG": [972521299884, "f9664914cb9e447586e527fb1294b08e87a8a509f0e8b6b1cb2c80f0b25200000025bd218ff2000000e26ec95fac"],
                "NQ66 NJDM QTC6 GGXY EH5V CKS8 K24N B2K7 CL6U": [2959375979628, "fb7946a4718f6c2a27e2b10bf6701e3819514566f0e8b6b1cb2c80e0e5a401000002b1088dd46c000002b1088dd46c"],
                "NQ86 VGMB LE1N 5KSN 2VL6 B5X5 PQCN DY51 H8A9": [3067276621235, "a483648b0b9b8bebb9b52667150e9dcb566e6cc6f0e8b6b1cb2c80f0b2520000007706a7d39e000002ca27eef5b3"],
                "NQ07 QQUS MUCK VXA7 XNPX Y40D 83YL FU9A Y9QT": [383487423764, "a122721dc8fbd234752e83fece129198e02d42abf0e8b6b1cb2c80e0e5a4010000005949a1b5140000005949a1b514"],
                "NQ79 5EN8 R5G3 V6C2 GS7V VCUB FBA9 LU5D LKVX": [4323400194170, "b3ce50fbf10c8b16ab0d68edec81b2bf6c96c4e5f0e8b6b1cb2c80f0b252000000a7c51f4415000003ee9ebb987a"],
                "NQ80 1JSC 6N00 8BPL 8T8Q 5661 LMNX NLYH SKN5": [3657534003052, "0aeab801dc726b37dcf4c84a06a106cf55862931f0e8b6b1cb2c80e0e5a401000003539603d76c000003539603d76c"],
                "NQ67 PNQL UVXD 000M 1UJ7 2RFG HNJD EYF5 2APJ": [1774931711709, "e9567a308ae0d0c4cb7a517b4d4454102e765302f0e8b6b1cb2c80e0e5a4010000019d422c96dd0000019d422c96dd"],
                "NQ25 BCLH 8CCK ERHD 7H8K MESQ 56PN S7QN JUHV": [1166024346011, "8b4ec5a3b2d0fd583024a08c963da6d8a0725b7bf0e8b6b1cb2c80e0e5a4010000010f7c77899b0000010f7c77899b"],
                "NQ75 2U1D Q6RC N1F3 EAH4 Y17C U0E4 GDE6 X740": [33662795495135, "9ac94a1a46736363a20b8e52074ca76981cc4339f0e8b6b1cb2c80f0b2520000051a49d3f3d000001e9dbaf7b6df"],
            };

        return Object.entries(genesisContracts).map(([address, [value, data]]) => ({
            address,
            balance: value,
            ...Nimiq.VestingContract.dataToPlain(Nimiq.BufferUtils.fromHex(data)) as { type: "vesting" } & PlainVestingData,
            totalAmount: value,
        }));
    }

    public async relayTransaction(obj: {
        sender: string;
        senderPubKey: Uint8Array;
        recipient: string;
        value: number;
        fee: number;
        validityStartHeight: number;
        signature: Uint8Array;
        extraData?: string | Uint8Array;
    }) {
        const client = await this.client;

        const tx = Nimiq.TransactionBuilder.newBasicWithData(
            Nimiq.Address.fromString(obj.sender),
            Nimiq.Address.fromString(obj.recipient),
            typeof obj.extraData === 'string'
                ? Nimiq.BufferUtils.fromAny(obj.extraData)
                : (obj.extraData || new Uint8Array(0)),
            BigInt(obj.value),
            BigInt(obj.fee),
            obj.validityStartHeight,
            await client.getNetworkId(),
        );
        tx.proof = Nimiq.SignatureProof.singleSig(
            new Nimiq.PublicKey(obj.senderPubKey),
            Nimiq.Signature.deserialize(obj.signature),
        ).serialize();

        return client.sendTransaction(tx);
    }

    public get innerClient() {
        return this._clientPromise!;
    }

    private get client() {
        if (!this._clientPromise) throw new Error('NetworkClient not initialized');
        return this._clientPromise.then(async (client) => {
            await client.waitForConsensusEstablished();
            return client;
        });
    }

    private networkToAlbatross(network: string) {
        switch (network) {
            case NETWORK_MAIN: return 'mainalbatross';
            case NETWORK_TEST: return 'testalbatross';
            case NETWORK_DEV: return 'devalbatross';
            default: throw new Error(`${ERROR_INVALID_NETWORK}: ${network}`);
        }
    }
}
