<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Nimiq Hub Demos</title>

    <script defer src="<%= htmlWebpackPlugin.options.cdnDomain %>/v<%= htmlWebpackPlugin.options.coreVersion %>/web-offline.js"
        integrity="<%= htmlWebpackPlugin.options.coreIntegrityHash %>"
        crossorigin="anonymous"></script>

    <style>
        body {
            font-family: 'Muli', system-ui, sans-serif;
        }

        .request {
            padding: 0 1em;
            float: left;
        }

        button,
        input {
            font-family: inherit;
            padding: 4px 8px;
            margin: 4px 0;
        }

        button {
            cursor: pointer;
        }
    </style>

    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Muli:400,600,700">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Fira+Mono&text=0123456789ABCDEFGHJKLMNPQRSTUVXY">
</head>
<body>

<div class="request">
    <h2>Stored accounts</h2>
    <br><button id="list-keyguard-keys" disabled>List Keyguard keys in console</button>
    <br><button id="list-accounts" disabled>Update accounts list</button>
    <ul id="accounts"></ul>
</div>

<div class="request">
    <br>
    <label style="padding: 1rem 0; cursor: pointer;">Popup <input type="radio" name="popup-vs-redirect" value="popup" checked></label>
    <label style="padding: 1rem 0; cursor: pointer;"><input type="radio" name="popup-vs-redirect" value="redirect"> Redirect</label>

    <h2>Onboarding</h2>
    <button id="onboard" disabled>Onboarding Menu</button>

    <h2>Create</h2>
    <button id="create" disabled>New account</button>

    <h2>Login (Import)</h2>
    <button id="login" disabled>Login</button>

    <h2>Choose Address</h2>
    <button id="choose-address" disabled>Choose address</button>
    <button id="choose-address-and-btc" disabled>Choose address + BTC</button>
</div>

<div class="request">
    <h2>Transactions</h2>
    <div class="row">
        <label>Keyguard BaseURL</label>
        <input value="http://localhost:8000/" disabled readonly>
    </div>

    <div class="row">
        <label>Transaction value (satoshi)</label>
        <input id="value" value="545000">
    </div>

    <div class="row">
        <label>Transaction fee (satoshi)</label>
        <input id="fee" value="123">
    </div>

    <div class="row">
        <label>Transaction data (ascii)</label>
        <input id="data" value="Thank you for testing the Nimiq Hub!">
    </div>

    <div class="row">
        <label>Validity start height</label>
        <input id="validitystartheight" type="number" value="176450">
    </div>

    <label><input type="checkbox" id="checkout-use-selected-address"> Selected Address as Checkout Sender</label>
    <br><label><input type="checkbox" id="checkout-force-sender"> Force Sender (for NIM Only Checkout)</label>
    <br><label><input type="checkbox" id="checkout-is-point-of-sale"> Is Point Of Sale Checkout</label>
    <br><button id="checkout" disabled>Checkout</button>
    <br><button id="multi-checkout" disabled>Multi Checkout</button>
    <br><button id="sign-transaction" disabled>Sign Transaction</button>
</div>

<div class="request">
    <h2>Sign Message</h2>
    <div class="row">
        <label>Message</label>
        <input id="message" value="Sign me, baby!">
    </div>

    <br><button id="sign-message" disabled>Sign Message</button>
    <br><button id="sign-message-with-account" disabled>Sign Message with selected address</button>
    <br><button id="sign-message-with-tabs" disabled>Sign Message with tabs</button>
</div>

<div class="request">
    <h2>Migrate</h2>
    <br><button id="setup-legacy-accounts" disabled>Setup legacy accounts</button>
    <br><button id="migrate" disabled>Migrate legacy accounts</button>

    <h2>No request</h2>
    <a href="/">Go to root without request</a>
</div>

<div class="request">
    <h2>Cashlink</h2>
    <br>
    <div>
        <input id="cashlink-use-selected-address" type="checkbox" checked>
        <label for="cashlink-use-selected-address">Selected address as sender</label>
    </div>
    <div>
        <label for="cashlink-value">Value (optional):</label>
        <input id="cashlink-value" type="number">
    </div>
    <div>
        <label for="cashlink-message">Message (optional):</label>
        <input id="cashlink-message">
    </div>
    <div>
        <input id="cashlink-auto-truncate-message" type="checkbox">
        <label for="cashlink-auto-truncate-message">Auto truncate message</label>
    </div>
    <div>
        <input id="cashlink-return-link" type="checkbox">
        <label for="cashlink-return-link">Return link</label>
    </div>
    <div id="cashlink-skip-sharing-container" style="display: none">
        <input id="cashlink-skip-sharing" type="checkbox" checked>
        <label for="cashlink-skip-sharing">Skip sharing</label>
    </div>
    <div>
        <label for="cashlink-theme">Theme</label>
        <select id="cashlink-theme">
            <option selected value="">Omitted</option>
        </select>
    </div>
    <br>
    <button id="create-cashlink">Create Cashlink</button>
    <ul id="cashlinks"></ul>
</div>

<div class="request">
    <h2>Bitcoin</h2>
    <br>
    <button id="activate-btc" disabled>Activate BTC</button>
    <br>
    <button id="sign-btc-transaction" disabled>Sign BTC Tx</button>
    <button id="setup-swap" class="nim-to-btc" disabled>Swap NIM -> BTC</button>
    <button id="setup-swap" class="btc-to-nim" disabled>Swap BTC -> NIM</button>
</div>

<div class="request">
    <h2>USDC on Polygon</h2>
    <br>
    <button id="activate-usdc" disabled>Activate USDC</button>
    <!-- <br>
    <button id="sign-usdc-transaction" disabled>Sign USDC Tx</button>
    <button id="setup-swap" class="nim-to-usdc" disabled>Swap NIM -> USDC</button>
    <button id="setup-swap" class="usdc-to-nim" disabled>Swap USDC -> NIM</button> -->
</div>

<div class="request">
    <h2>Multisig</h2>

    <button id="connect-account" disabled>Connect Account</button>

    <div class="row">
        <label>Signer*</label>
        <input id="multisig-signer" value="" disabled placeholder="Connect Account to set">
    </div>
    <div class="row">
        <label>PublicKey*</label>
        <input id="multisig-publickey" value="" disabled placeholder="Connect Account to set">
    </div>
    <div class="row">
        <label>Amount (NIM)</label>
        <input id="multisig-value" type="number" value="2000">
    </div>
    <div class="row">
        <label>Data (ASCII)</label>
        <input id="multisig-data" value="">
    </div>
    <div class="row">
        <label>Config</label>
        <input id="multisig-signers" type="number" value="2" style="width: 25px;"> of
        <input id="multisig-participants" type="number" value="3" style="width: 25px;">
    </div>
    <div class="row">
        <label>Username</label>
        <input id="multisig-username" value="Antoine">
    </div>

    <br><small>(Uses account of selected address)</small>
    <br><button id="sign-multisig-transaction" disabled>Sign Multisig Transaction</button>
</div>

<div class="request">
    <h2>Result</h2>
    <p id="result"></p>
</div>

<!-- needed for Sign Btc Transaction demo -->
<script defer type="text/javascript"
    src="/bitcoin/BitcoinJS.min.js"
    integrity="<%= htmlWebpackPlugin.options.bitcoinJsIntegrityHash %>"
    crossorigin="anonymous"></script>

<script type="module">
    import init, * as Nimiq from '/nimiq/web/index.js';

    /** @type {Promise<Nimiq> | undefined} */
    let initPromise;

    window.loadAlbatross = async function() {
        return initPromise || (initPromise = new Promise(async resolve => {
            await init();
            resolve(Nimiq);
        }));
    }
</script>

<!-- built files will be auto injected -->
</body>
</html>
